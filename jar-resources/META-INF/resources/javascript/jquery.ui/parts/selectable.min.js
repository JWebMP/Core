
/*!
 * jQuery UI Selectable @VERSION
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./core","./mouse","./widget"],a)}else{a(jQuery)}}(function(a){return a.widget("ui.selectable",a.ui.mouse,{version:"@VERSION",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b=this;this._addClass("ui-selectable");this.dragged=false;this.refresh=function(){b.selectees=a(b.options.filter,b.element[0]);b._addClass(b.selectees,"ui-selectee");b.selectees.each(function(){var c=a(this),d=c.offset();a.data(this,"selectable-item",{element:this,$element:c,left:d.left,top:d.top,right:d.left+c.outerWidth(),bottom:d.top+c.outerHeight(),startselected:false,selected:c.hasClass("ui-selected"),selecting:c.hasClass("ui-selecting"),unselecting:c.hasClass("ui-unselecting")})})};this.refresh();this._mouseInit();this.helper=a("<div>");this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item");this._mouseDestroy()},_mouseStart:function(d){var c=this,b=this.options;this.opos=[d.pageX,d.pageY];if(this.options.disabled){return}this.selectees=a(b.filter,this.element[0]);this._trigger("start",d);a(b.appendTo).append(this.helper);this.helper.css({left:d.pageX,top:d.pageY,width:0,height:0});if(b.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each(function(){var e=a.data(this,"selectable-item");e.startselected=true;if(!d.metaKey&&!d.ctrlKey){c._removeClass(e.$element,"ui-selected");e.selected=false;c._addClass(e.$element,"ui-unselecting");e.unselecting=true;c._trigger("unselecting",d,{unselecting:e.element})}});a(d.target).parents().addBack().each(function(){var e,f=a.data(this,"selectable-item");if(f){e=(!d.metaKey&&!d.ctrlKey)||!f.$element.hasClass("ui-selected");c._removeClass(f.$element,e?"ui-unselecting":"ui-selected")._addClass(f.$element,e?"ui-selecting":"ui-unselecting");f.unselecting=!e;f.selecting=e;f.selected=e;if(e){c._trigger("selecting",d,{selecting:f.element})}else{c._trigger("unselecting",d,{unselecting:f.element})}return false}})},_mouseDrag:function(i){this.dragged=true;if(this.options.disabled){return}var f,h=this,d=this.options,c=this.opos[0],g=this.opos[1],b=i.pageX,e=i.pageY;if(c>b){f=b;b=c;c=f}if(g>e){f=e;e=g;g=f}this.helper.css({left:c,top:g,width:b-c,height:e-g});this.selectees.each(function(){var j=a.data(this,"selectable-item"),k=false;if(!j||j.element===h.element[0]){return}if(d.tolerance==="touch"){k=(!(j.left>b||j.right<c||j.top>e||j.bottom<g))}else{if(d.tolerance==="fit"){k=(j.left>c&&j.right<b&&j.top>g&&j.bottom<e)}}if(k){if(j.selected){h._removeClass(j.$element,"ui-selected");j.selected=false}if(j.unselecting){h._removeClass(j.$element,"ui-unselecting");j.unselecting=false}if(!j.selecting){h._addClass(j.$element,"ui-selecting");j.selecting=true;h._trigger("selecting",i,{selecting:j.element})}}else{if(j.selecting){if((i.metaKey||i.ctrlKey)&&j.startselected){h._removeClass(j.$element,"ui-selecting");j.selecting=false;h._addClass(j.$element,"ui-selected");j.selected=true}else{h._removeClass(j.$element,"ui-selecting");j.selecting=false;if(j.startselected){h._addClass(j.$element,"ui-unselecting");j.unselecting=true}h._trigger("unselecting",i,{unselecting:j.element})}}if(j.selected){if(!i.metaKey&&!i.ctrlKey&&!j.startselected){h._removeClass(j.$element,"ui-selected");j.selected=false;h._addClass(j.$element,"ui-unselecting");j.unselecting=true;h._trigger("unselecting",i,{unselecting:j.element})}}}});return false},_mouseStop:function(c){var b=this;this.dragged=false;a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");b._removeClass(d.$element,"ui-unselecting");d.unselecting=false;d.startselected=false;b._trigger("unselected",c,{unselected:d.element})});a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");b._removeClass(d.$element,"ui-selecting")._addClass(d.$element,"ui-selected");d.selecting=false;d.selected=true;d.startselected=true;b._trigger("selected",c,{selected:d.element})});this._trigger("stop",c);this.helper.remove();return false}})}));