var jw={isLoading:false,pageLoading:true};window.jw=jw;jw.siteAddress="SITEADDRESSINSERT";jw.angularLoading=false;jw.mobile={};jw.actions={};jw.localstorage={};var jwebswingPermStore={};try{if(Persist){jwebswingPermStore=new Persist.Store("JWebSwingStore");jwebswingPermStore.iterate(function(k,v){jw.localstorage[k]=v})}}catch(e){console.warn("LocalStorage may not work. No persist library added")}jw.sessionstorage={};if(window.sessionStorage)if(window.sessionStorage){for(var i=0;i<window.sessionStorage.length;i++){jw.sessionstorage[window.sessionStorage.key(i)]=window.sessionStorage.getItem(window.sessionStorage.key(i))}}jw.env={};jw.env.loadescripts=[];jw.env.loadedcss=[];jw.env.controller=null;$("head link[rel$='stylesheet']").each(function(item){jw.env.loadedcss.push($(this).attr("href"))});jw.actions.loadData=function(data,$scope,$parse,$timeout){$.each(data.variables,function(i,item){var the_string=item.variableName;if($parse){var model=$parse(the_string);model.assign($scope,item.variable)}});if($timeout){$timeout(function(){})}};jw.actions.dataVariable=function(name,object){var newVariable={};newVariable.variableName=name;newVariable.variableObject=object;return newVariable};jw.actions.processResponse=function(result,$scope,$parse,$timeout,$compile,$rootScope){jw.actions.processLocalStorage(result);jw.actions.processSessionStorage(result);jw.actions.processHtml(result,$scope,$compile,$rootScope);jw.actions.processCssReferences(result);jw.actions.processJSReferences(result);jw.actions.processCss(result);jw.actions.loadData(result,$scope,$parse,$timeout);jw.actions.processReactions(result)};jw.actions.processLocalStorage=function(result){if(result.localStorage){for(var name in result.localStorage){if(!result.localStorage.hasOwnProperty(name))continue;var value=result.localStorage[name];try{if(Persist){jwebswingPermStore.set(name,value);jwebswingPermStore.save()}}catch(e){console.warn("LocalStorage may not work. No persist library added")}jw.localstorage[name]=value}}};jw.actions.processSessionStorage=function(result){if(result.sessionStorage){for(var name in result.sessionStorage){if(!result.sessionStorage.hasOwnProperty(name))continue;var value=result.sessionStorage[name];try{if(Persist){jwebswingPermStore.set(name,value)}}catch(e){console.warn("LocalStorage may not work. No persist library added")}jw.sessionStorage[name]=value}}};jw.actions.processCss=function(result){$("head").append("<style>"+result+"</style>")};jw.actions.loadNextJSReference=function(array,position,completedCallback){position=position+1;if(position===array.length){completedCallback()}else{jw.actions.synchronizedJSReferencesLoad(array,position,completedCallback)}};jw.actions.synchronizedJSReferencesLoad=function(array,position,completedCallback){var ref=array[position];if(ref){if(ref.endsWith("/jwas")||ref.endsWith("/jwjs")||ref.endsWith("/jwad")||ref.endsWith("/jwdata")||ref.endsWith("/jwajax")){position=position+1;$.notCachedScriptSync(ref).complete(jw.actions.loadNextJSReference(array,position,completedCallback))}else{position=position+1;$.cachedScriptSync(ref).complete(jw.actions.loadNextJSReference(array,position,completedCallback))}}};jw.actions.processJSReferences=function(result){if(result.jsReferences){jw.actions.synchronizedJSReferencesLoad(result.jsReferences,0,function(){jw.actions.processJsScripts(result)})}else{jw.actions.processJsScripts(result)}};jw.actions.processJsScripts=function(result){if(result.jsScripts){$.each(result.jsScripts,function(i,item){jw.actions.loadScript(item)})}if(result.events){$.each(result.events,function(i,item){jw.actions.loadScript(item)})}if(result.features){$.each(result.features,function(i,item){jw.actions.loadScript(item)})}};jw.actions.loadScript=function(item,tries){if(!tries)tries=0;try{var result=eval(item)}catch(e){console.log(e);tries=tries+1;if(tries<10)setTimeout(jw.actions.loadScript(item,tries),1500)}};jw.actions.processCssReferences=function(result){$.each(result.cssLinks,function(i,item){var ss=document.styleSheets;var found=false;for(var i=0,max=ss.length;i<max;i++){if(ss[i].href===item){found=true;break}}if(!found){$("head").append('<link rel="stylesheet" type="text/css" href="'+item+'">')}})};jw.actions.processHtml=function(result,$scope,$compile,$rootScope){if(result.components)$.each(result.components,function(i,item){var htmlString;var jqHtmlString=$(item.html);if(item.insertType==="Replace"){$("#"+item.id).replaceWith(jqHtmlString)}else if(item.insertType==="Append"){$("#"+item.id).after(jqHtmlString)}else if(item.insertType==="Prepend"){$("#"+item.id).before(jqHtmlString)}else if(item.insertType==="Insert"){$("#"+item.id).prepend(jqHtmlString)}else if(item.insertType==="Insert_Last"){$("#"+item.id).append(jqHtmlString)}var myNewSelf=$("#"+item.id);try{$compile(myNewSelf)($scope);$scope.$apply()}catch(e){$compile(myNewSelf)($rootScope);$rootScope.$apply()}})};jw.actions.processReactions=function(result){$.each(result.reactions,function(i,item){var title=item.reactionTitle;var message=item.reactionMessage;var type=item.reactionType;var dialogType=item.type;var timeout=item.actionTimeout;var options=item.options;if(type==="DialogDisplay"){jw.actions.showDialog(title,message,dialogType,options)}else if(type==="RedirectHome"){setTimeout("location.reload();",timeout)}})};jw.actions.showDialog=function(title,message,type,options){if(BootstrapDialog){if(options){options.title=title;options.message=message;BootstrapDialog.show(options)}if(type==="Danger")BootstrapDialog.show({title:title,message:message,type:BootstrapDialog.TYPE_DANGER});else if(type==="Success")BootstrapDialog.show({title:title,message:message,type:BootstrapDialog.TYPE_SUCCESS});else if(type==="Secondary")BootstrapDialog.show({title:title,message:message,type:BootstrapDialog.TYPE_SECONDARY});else if(type==="Dark")BootstrapDialog.show({title:title,message:message,type:BootstrapDialog.TYPE_DARK});else if(type==="Light")BootstrapDialog.show({title:title,message:message,type:BootstrapDialog.TYPE_LIGHT});else if(type==="Warning")BootstrapDialog.show({title:title,message:message,type:BootstrapDialog.TYPE_WARNING});else if(type==="Primary")BootstrapDialog.show({title:title,message:message,type:BootstrapDialog.TYPE_PRIMARY});else if(type==="Information")BootstrapDialog.show({title:title,message:message,type:BootstrapDialog.TYPE_INFO});else if(type==="Default")BootstrapDialog.show({title:title,message:message,type:BootstrapDialog.TYPE_INFO})}};jQuery.cachedScript=function(url,options){options=$.extend(options||{},{dataType:"script",cache:true,url:url,async:true});return jQuery.ajax(options)};jQuery.cachedScriptSync=function(url,options){options=$.extend(options||{},{dataType:"script",cache:true,url:url,async:false});return jQuery.ajax(options)};jQuery.notCachedScript=function(url,options){options=$.extend(options||{},{dataType:"script",cache:false,url:url,async:true});return jQuery.ajax(options)};jQuery.notCachedScriptSync=function(url,options){options=$.extend(options||{},{dataType:"script",cache:false,url:url,async:false});return jQuery.ajax(options)};